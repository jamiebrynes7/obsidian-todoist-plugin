# Obsidian x Todoist Plugin

![GitHub Workflow Status](https://img.shields.io/github/workflow/status/jamiebrynes7/obsidian-todoist-plugin/premerge?style=for-the-badge) ![GitHub release (latest SemVer)](https://img.shields.io/github/v/release/jamiebrynes7/obsidian-todoist-plugin?style=for-the-badge)

An experimental [Obsidian](https://obsidian.md/) plugin using [Volcano](https://github.com/kognise/volcano) to materialize [Todoist](https://todoist.com/) task lists in Obsidian notes.

_Tested with Obsidian 0.8.4 and Volcano 1.0.6, your results may vary!_

![Example gif](./.github/obsidian-todoist-sync.gif)

## Usage

1. Download `todoist.js` from the [latest release](https://github.com/jamiebrynes7/obsidian-todoist-plugin/releases).
2. Place this into your `~/volcano/plugins` directory.
3. Copy your [Todoist API token](https://todoist.com/prefs/integrations) into `.obsidian/todoist-token`. (If you are synchronizing your vault, I recommend ignoring this file for safety reasons).
4. Open Obsidian and ensure that the Todoist plugin is enabled.
5. Place a code block like the following in any note:
   ````markdown
   ```todoist
   {
   "name": "My Tasks",
   "filter": "today | overdue"
   }
   ```
   ````
6. Swap to preview mode and the plugin should replace this code block with the materialized result of that filter.

## Inputs

| Name          | Required | Description                                                                                           | Type   | Default |
| ------------- | :------: | ----------------------------------------------------------------------------------------------------- | ------ | ------- |
| `name`        |    ✓     | The title for the materialized query.                                                                 | string |         |
| `filter`      |    ✓     | Any valid [Todoist filter](https://get.todoist.help/hc/en-us/articles/205248842-Filters)*             | string |         |
| `autorefresh` |          | The number of seconds between auto-refreshing. If omitted, the query use the default global settings. | number | null    |

_* Except for section filters like "/My Section"_

## Settings

This plugin adds a setting tab to the Obsidian settings menu. This controls global settings for this plugin.

| Name                  | What does it control?                                                                       | Default |
| --------------------- | ------------------------------------------------------------------------------------------- | ------- |
| Task fade animation   | Whether tasks should fade in and out when added or removed.                                 | true    |
| Auto-refresh          | Whether queries should auto-refresh at a set interval.                                      | false   |
| Auto-refresh interval | The interval (in seconds) that queries should auto-refresh by default. Integer numbers only | 60      |

## CSS

### General

There are a few CSS classes in the generated DOM, which you can use to customize the rendering of the list:

- `.todoist-query-title`: Attached to the header that contains the query title.
- `.todoist-refresh-button`: Attached to the refresh button.
- `.todoist-refresh-spin`: Attached to the refresh icon _when_ the plugin is refreshing the Todoist data.

My CSS for this in the demo above was:

```css
.todoist-query-title {
  display: inline;
}

.todoist-refresh-button {
  display: inline;
  margin-left: 8px;
}

.todoist-refresh-spin {
  animation: spin 1s linear infinite;
}

@-webkit-keyframes spin {
  100% {
    -webkit-transform: rotate(360deg);
  }
}
```

### Priority

Each task (`li` element) generated by the plugin will have a CSS class attached to it to represent that tasks priority. These classes are `todoist-p1`, `todoist-p2`, `todoist-p3`, and `todoist-p4`.

For example:

```css
.todoist-p1 > input[type="checkbox"] {
  /* This matches against the input element rendered for a priority 1 task. */
}
```
